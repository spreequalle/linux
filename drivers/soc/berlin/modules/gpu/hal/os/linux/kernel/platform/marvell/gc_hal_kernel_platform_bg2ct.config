ifeq ($(CONFIG_MV88DE3100_BG2_CT),y)
USE_HARDWARE_MMU                  ?= 1
else ifeq ($(CONFIG_BERLIN2CT),y)
USE_HARDWARE_MMU                  ?= 1
else ifeq ($(CONFIG_BERLIN2Q),y)
USE_HARDWARE_MMU                  ?= 1
else
USE_HARDWARE_MMU                  ?= 0
endif

####modified for marvell bg2
######these two variables are used to compile linux, if you want to compile linux version, please turn on them
EXTRA_CFLAGS += -D__LINUX_KERNEL__
EXTRA_CFLAGS += -DMV88DE
EXTRA_CFLAGS += -I$(AQROOT)/include

ifeq ($(VERSION),3)
ifeq ($(PATCHLEVEL), 4)
EXTRA_CFLAGS += -Iarch/arm/mach-berlin/modules/shm
else
EXTRA_CFLAGS += -Iarch/arm/mach-mv88de3100/modules/shm
endif
else
EXTRA_CFLAGS += -Iarch/arm/mach-mv88de3100/modules/shm
endif
#EXTRA_CFLAGS += -DDEBUG -D_DEBUG

MODULE_NAME := gal3d
DRV_NAME ?= gal3d
EXTRA_CFLAGS   += -DDRV_NAME=\"$(DRV_NAME)\"

GAL_DEV  ?= /dev/$(DRV_NAME)
EXTRA_CFLAGS   += -DGAL_DEV=\"$(GAL_DEV)\"
NO_USER_DIRECT_ACCESS_FROM_KERNEL ?= 1
####end for marvell bg2

####modified for marvell bg2
CONFIG_MV88DE3100_GPUMEM_FROM_SHM ?= y
ifeq ($(CONFIG_MV88DE3100_GPUMEM_FROM_SHM),y)
EXTRA_CFLAGS += -DUSE_GALOIS_SHM=0
CUSTOMER_ALLOCATOR_OBJS := $(OS_KERNEL_DIR)/allocator/marvell/gc_hal_kernel_allocator_shm.o
ALLOCATOR_ARRAY_H_LOCATION := $(OS_KERNEL_DIR)/allocator/marvell/
EXTRA_CFLAGS += -DUSE_SHM=1
else
EXTRA_CFLAGS += -DUSE_GALOIS_SHM=0
endif

####modified for marvell bg2 ics4
ifeq ($(USE_HARDWARE_MMU), 1)
EXTRA_CFLAGS += -DUSE_HARDWARE_MMU=1
else
EXTRA_CFLAGS += -DUSE_HARDWARE_MMU=0
endif

ifeq ($(CONFIG_BERLIN2Q), y)
EXTRA_CFLAGS += -DSOC_BERLIN2Q=1
else
EXTRA_CFLAGS += -DSOC_BERLIN2Q=0
endif
####end for marvell bg2 ics4


FORCE_ALL_VIDEO_MEMORY_CACHED     := 1
NONPAGED_MEMORY_BUFFERABLE        := 0

EXTRA_CFLAGS += -DDEVICE_NAME=\"gal3d\"
